@*178. Создать новый компонент CarDetails и сверстать его*@
@page "/car/car-details/{carId:int}"

@*188.2 *@
@inject IJSRuntime _js
@inject ILocalStorageService _localStorage

<div class="mx-4 mt-3 px-0 px-md-3 mx-md-3" style="border-radius: 20px; border: 1px groove #000; background-color: #ffffffe6;">

    <div class="row p-2 my-3" style="border-radius: 20px;">
        <div class="col-sm-12 col-md-7 p-4">
            <div class="row pb-3 px-2 text-success border-bottom border-dark">
                <div class="col-8 py-1">
                    <p style="font-size:x-large; margin:0px;">Selected car</p>
                </div>
                <div class="col-4 p-0 d-flex justify-content-end align-items-center">
                    <a href="cars/allexs" class="btn btn-secondary">Back to Car's</a>
                </div>
            </div>

            <div class="row mt-2">
                <div class="col-sm-12 col-md-6">

                    <!-- Carousel wrapper -->
                    <div id="carouselBasicExample" class="carousel slide carousel-fade" data-mdb-ride="carousel">
                        <!-- Indicators -->
                        <div class="carousel-indicators">
                            <button type="button"
                                    data-mdb-target="#carouselBasicExample"
                                    data-mdb-slide-to="0"
                                    class="active"
                                    aria-current="true"
                                    aria-label="Slide 1"></button>                            
                        </div>

                        <!-- Inner -->
                        <div class="carousel-inner">
                            <!-- Single item -->
                            <div class="carousel-item active h-25">
                                <img src="https://images.hdqwalls.com/wallpapers/tesla-model-3-2017-lf.jpg" class="d-block w-100" alt="Sunset Over the City" />
                            </div>


                            <!-- Inner -->
                            <!-- Controls -->
                            <button class="carousel-control-prev" type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                    <!-- Carousel wrapper -->

                </div>

                <div class="col-sm-12 col-md-6">
                    <span class="float-md-end pt-4">
                        <span class="float-md-end">Seats count: ##</span><br />
                        <h4 class="text-warning font-weight-bold pt-md-2 float-md-end"><span style="border-bottom: 1px solid #ff6a00">####</span> €</h4><br />
                        <span class="float-md-end">Cost for #### day(s)</span>
                    </span>
                </div>

            </div>

            <div class="row p-2">
                <div class="col-12">
                    <p class="card-title text-warning" style="font-size:xx-large:">##NAME##</p>
                    <p class="card-text" style="font-size: large;">##DETAILS##</p>
                </div>
            </div>

        </div>

        <div class="col-12 col-lg-5 p-4 mt-2 mt-md-0 border-start border-dark">
            <form Model="CarBooking" class="container" OnValidSubmit="CheckOutHandler">

                <div class="row px-2 text-success border-bottom border-dark">
                    <div class="col-7 py-1">
                        <p style="font-size: x-large; margin: 0px;">Enter Details</p>
                    </div>
                </div>

                <div class="row mt-2">
                    <div class="form-group pt-2">
                        <label class="text-warning">Name</label>
                        <input type="text" class="form-control" />
                    </div>
                    <div class="form-group pt-2">
                        <label class="text-warning">Phone</label>
                        <input type="text" class="form-control" />
                    </div>
                    <div class="form-group pt-2">
                        <label class="text-warning">Email</label>
                        <input type="text" class="form-control" />
                    </div>
                    <div class="form-group pt-2">
                        <label class="text-warning">Start rent date</label>
                        <input type="date" disabled="disabled" class="form-control" />
                    </div>
                    <div class="form-group pt-2">
                        <label class="text-warning">End rent date</label>
                        <input type="date" disabled="disabled" class="form-control" />
                    </div>
                    <div class="form-group pt-2">
                        <label class="text-warning">Rent day(s)</label>
                        <select class="form-control form-select">
                            @for (var i = 1; i < 31; i++)
                            {
                                <option value="@i">@i</option>
                            }
                        </select>
                    </div>

                    <div class="form-group mt-3">
                        <button type="submit" class="btn btn-success form-control">Checkout now</button>
                    </div>

                </div>


            </form>
        </div>
    </div>

</div>

@code {
    [Parameter] public int? CarId { get; set; }

    // 188.1 Начинаем реализацию компонента CarDetails *****
    public CarBookingVM carBookingVM { get; set; } = new();
    int DaysNumber = 1;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            carBookingVM.OrderDetails = new();

            if (CarId is not null)
            {
                if (await _localStorage.GetItemAsync<IndexVM>(SD.LOCAL_INITIALBOOKING) is not null)
                {
                    
                }
            }

        }
        catch (Exception ex)
        {
            await _js.ToastrError(ex.Message);
        }
    }
    // **********************************************************
}
